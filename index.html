

<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Financial Harmony Dashboard</title>
  <!-- Favicon/logo -->
  <link rel="icon" type="image/png" href="logo.png" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" />
  <!-- RemixIcon for pro icons -->
  <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- TradingView Widget -->
  <script src="https://s3.tradingview.com/tv.js"></script>
  <!-- Auth0 SPA JS SDK -->
  <script src="https://cdn.auth0.com/js/auth0-spa-js/2.1/auth0-spa-js.production.js"></script>
  <style>
    :root {
      --primary: #2563eb;
      --primary-hover: #1749b1;
      --primary-light: #e0eaff;
      --bg: #f7fafd;
      --sidebar: #fff;
      --text: #1e293b;
      --muted: #64748b;
      --border: #e5e7eb;
      --card: #fff;
      --accent: #f1f5f9;
      --radius: 16px;
      --shadow: 0 2px 8px #0001;
      --transition: 0.2s;
    }
    html, body { height: 100%; margin: 0; padding: 0; }
    body {
      font-family: 'Inter', Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      overflow: hidden;
      transition: background .3s, color .3s;
    }
    body.dark {
      --primary: #60a5fa;
      --primary-hover: #3b82f6;
      --primary-light: #1e3a8a;
      --bg: #0f172a;
      --sidebar: #1e293b;
      --text: #f1f5f9;
      --muted: #94a3b8;
      --border: #334155;
      --card: #1e293b;
      --accent: #475569;
      --shadow: 0 2px 8px #0003;
    }
    body.dark .topbar {
      background: linear-gradient(95deg, #1e3a8a 0%, #1e293b 90%);
      border-bottom: 1px solid var(--border);
    }
    body.dark .help-panel { background: linear-gradient(160deg,#3b82f6 60%,#1e293b 120%); }
    body.dark .help-bottom-bar { background: #1e293b; }
    body.dark .help-links-list { background: #1e293b; border: 1px solid var(--border); }
    body.dark .help-link-item:hover { background: #334155; }
    body.dark .stat-card, body.dark .plan-card, body.dark .pay-modal, body.dark .chart-modal, body.dark .bot-modal, body.dark .help-modal, body.dark .exchange-modal { background: var(--card); }
    body.dark .nav-tab.active, body.dark .nav-tab:hover { background: var(--primary-light); color: var(--primary); }
    /* Sidebar */
    .sidebar {
      width: 80px;
      background: var(--sidebar);
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 24px 0;
      gap: 4px;
      z-index: 2;
      position: fixed;
      height: 100vh;
      transition: width var(--transition), background var(--transition);
    }
    .sidebar .logo {
      width: 56px; height: 56px;
      background: var(--primary-light);
      border-radius: 16px;
      display: flex; align-items: center; justify-content: center;
      margin-bottom: 18px;
      padding: 0;
      border: 2px solid var(--primary);
      overflow: hidden;
    }
    .sidebar .logo img {
      width: 100%; height: 100%; object-fit: cover;
      border-radius: 12px;
      background: #fff;
    }
    .sidebar .sidebar-icon {
      width: 100%;
      min-width: 52px;
      padding: 10px 0;
      display: flex;
      align-items: center;
      justify-content: center;
      border: none;
      background: none;
      color: var(--muted);
      font-size: 22px;
      cursor: pointer;
      border-radius: 12px;
      margin-bottom: 6px;
      transition: background var(--transition), color var(--transition), transform var(--transition);
      position: relative;
      outline: none;
      font-family: inherit;
    }
    .sidebar .sidebar-icon.active,
    .sidebar .sidebar-icon:hover {
      background: var(--primary-light);
      color: var(--primary);
      transform: scale(1.08);
    }
    .sidebar .label {
      display: none;
      margin-left: 10px;
      font-size: 1rem;
      font-weight: 600;
      letter-spacing: 0;
    }
    .sidebar:hover {
      width: 230px;
    }
    .sidebar:hover .sidebar-icon {
      justify-content: flex-start;
      padding-left: 22px;
    }
    .sidebar:hover .label {
      display: inline;
    }
    @media (max-width: 900px) {
      .sidebar { width: 54px; }
      .sidebar .logo { width: 36px; height:36px; }
      .sidebar .sidebar-icon { font-size: 19px; }
    }
    /* Topbar */
    .topbar {
      position: fixed; left: 80px; right: 0; top: 0; height: 68px;
      background: linear-gradient(95deg, #e0eaff 0%, #fff 90%);
      border-bottom: 1px solid var(--border);
      display: flex; align-items: center;
      padding: 0 36px;
      z-index: 1;
      transition: left var(--transition), background var(--transition), border-bottom var(--transition);
    }
    .sidebar:hover ~ .topbar { left: 230px; }
    .topbar .logo-txt {
      margin-right: 24px;
      display: flex; align-items: center; gap: 10px;
    }
    .topbar .logo-txt img { height: 42px; border-radius: 12px;}
    .topbar .logo-txt span { font-weight: 900; font-size: 1.4rem; letter-spacing: 1px;}
    .topbar .nav-tabs {
      display: flex; gap: 0; margin-right: 28px;
    }
    .topbar .nav-tab {
      padding: 9px 24px; border-radius: 10px 10px 0 0;
      border: none; background: none; font-weight: 600;
      color: var(--muted); cursor: pointer; font-size: 1.05rem;
      margin-right: 2px; transition: background var(--transition), color var(--transition);
    }
    .topbar .nav-tab.active, .topbar .nav-tab:hover {
      background: var(--primary-light);
      color: var(--primary);
    }
    .topbar .crypto-prices {
      display: flex; gap: 16px; align-items: center; font-size: 1rem; margin-right: 16px;
    }
    .crypto-price { display: flex; align-items: center; gap:4px; cursor: pointer;}
    .crypto-price:hover { text-decoration: underline;}
    .crypto-price .crypto-icon {
      width: 22px; height: 22px; border-radius: 50%; background: orange;
      display: flex; align-items: center; justify-content: center;
      font-weight: 700; color: #fff; font-size: 1rem; margin-right: 4px;
      transition: background var(--transition);
    }
    .crypto-price .price-change.up { color: #16a34a;}
    .crypto-price .price-change.down { color: #dc2626;}
    .topbar .create-bot {
      background: var(--primary); color: #fff; border: none;
      font-weight: 600; border-radius: 8px; padding: 8px 16px; cursor: pointer;
      margin-right: 10px; transition: background var(--transition), transform var(--transition);
    }
    .topbar .create-bot:hover { background: var(--primary-hover); transform: scale(1.07);}
    .topbar .notifications {
      position: relative; margin-right: 10px;
      cursor: pointer;
    }
    .topbar .bell { font-size: 1.3rem; cursor: pointer; }
    .topbar .notification-count {
      position: absolute; top: -7px; right: -7px; background: #dc2626; color: #fff; border-radius: 50%; padding: 2px 7px; font-size: .8rem; font-weight: bold;
    }
    .notifications-dropdown {
      display: none;
      position: absolute;
      top: 50px;
      right: 0;
      background: var(--card);
      box-shadow: var(--shadow);
      border-radius: var(--radius);
      width: 300px;
      padding: 16px;
      z-index: 10;
    }
    .notifications-dropdown.active { display: block;}
    .notification-item { margin-bottom: 12px; border-bottom: 1px solid var(--border); padding-bottom: 12px;}
    .topbar .user-profile {
      width: 38px; height: 38px; border-radius: 50%; background: var(--primary-light);
      display: flex; align-items: center; justify-content: center; font-size: 1.15rem; font-weight: 700; color: var(--primary);
      cursor: pointer; position: relative;
    }
    .user-dropdown {
      display: none;
      position: absolute;
      top: 50px;
      right: 0;
      background: var(--card);
      box-shadow: var(--shadow);
      border-radius: var(--radius);
      width: 200px;
      padding: 16px;
      z-index: 10;
    }
    .user-dropdown.active { display: block;}
    .user-dropdown a { display: block; margin-bottom: 8px; color: var(--text); text-decoration: none;}
    .user-dropdown a:hover { color: var(--primary);}
    /* MAIN */
    .main {
      margin-left: 80px; margin-top: 68px; padding: 32px 32px 18px 32px;
      overflow-y: auto; height: calc(100vh - 68px); background: var(--bg);
      transition: margin-left var(--transition);
      position: relative;
      z-index: 0;
    }
    .sidebar:hover ~ .main { margin-left: 230px; }
    @media (max-width: 900px) {
      .main { margin-left: 54px; padding: 13px 2px 6px 8px;}
      .sidebar:hover ~ .main { margin-left: 230px;}
    }
    .section { display: none; }
    .section.active { display: block; animation: fadeInSection 0.5s cubic-bezier(0.29, 1, 0.49, 1.24);}
    @keyframes fadeInSection { from{opacity:0;transform:translateY(24px);} to{opacity:1;transform:translateY(0);} }
    /* Help Panel */
    .help-float-btn {
      position: fixed;
      bottom: 32px;
      right: 36px;
      width: 65px;
      height: 65px;
      background: var(--primary);
      color: #fff;
      border-radius: 50%;
      box-shadow: 0 4px 23px #2563eb33;
      display: flex; align-items: center; justify-content: center;
      font-size: 2.5rem;
      cursor: pointer;
      z-index: 1001;
      transition: background .2s;
    }
    .help-float-btn:hover { background: var(--primary-hover);}
    .help-panel-bg {
      display: none;
      position: fixed; z-index: 2000;
      left: 0; top: 0; right: 0; bottom: 0;
      background: rgba(30,37,53,0.13);
      align-items: flex-end; justify-content: flex-end;
    }
    .help-panel-bg.active { display: flex;}
    .help-panel {
      background: linear-gradient(160deg,#228be6 60%,#fff 120%);
      border-radius: 22px 22px 0 0;
      box-shadow: 0 4px 38px #2563eb22;
      width: 370px; max-width:95vw;
      min-height: 420px;
      padding: 0 0 18px 0;
      margin: 0 36px 36px 0;
      position: relative;
      animation: fadeInSection .42s;
      display: flex; flex-direction: column;
    }
    .help-header {
      display: flex; align-items: flex-start; gap: 7px; padding: 18px 18px 0 18px;
    }
    .help-header .help-agents { display: flex; gap: -8px;}
    .help-header .help-agent {
      width: 38px; height: 38px; border-radius: 50%; border: 3px solid #fff;
      background: #f1f5f9; object-fit: cover; margin-right: -10px;
    }
    .help-header .close-btn {
      margin-left: auto; background: none; border: none; color: #fff;
      font-size: 1.7em; cursor: pointer;
    }
    .help-panel-content {
      padding: 0 18px 0 18px;
    }
    .help-panel-content h2 {
      font-size: 1.45em; font-weight: 800; margin: 10px 0 6px 0; color: #fff;
    }
    .help-panel-content p { font-size: 1.13em; color: #fff; margin-bottom: 15px;}
    .help-panel-content .search-box { margin-bottom: 14px;}
    .help-panel-content input[type="search"] {
      width: 100%; border-radius: 10px; border: none; padding: 8px 12px; font-size: 1.07em; margin-top: 7px;
    }
    .help-links-list { background: #fff; border-radius: 12px; box-shadow: 0 2px 8px #0001; padding: 8px 0 2px 0; margin-bottom: 8px;}
    .help-link-item { padding: 10px 19px; cursor: pointer; border-bottom: 1px solid #f1f5f9; font-size: 1.07em;}
    .help-link-item:last-child{ border-bottom: none;}
    .help-link-item:hover { background: #e0eaff;}
    .help-bottom-bar {
      display: flex; justify-content: space-around; align-items: center;
      background: #fff; border-radius: 0 0 22px 22px; padding: 10px 0; margin-top: 10px;
    }
    .help-bottom-bar button {
      background: none; border: none; color: var(--primary); font-weight: 700;
      font-size: 1.15em; cursor: pointer; display: flex; flex-direction: column; align-items: center; gap: 3px;
      transition: color .16s;
    }
    .help-bottom-bar button.active, .help-bottom-bar button:hover { color: var(--primary-hover);}
    .help-bottom-bar i { font-size: 1.4em;}
    /* Demo avatar agent */
    .help-header .help-agent { background:#eee;}
    /* Hide scrollbar in help panel */
    .help-panel-content::-webkit-scrollbar { width: 0 !important;}
    /* Responsive */
    @media (max-width:600px){
      .main{padding:0 1px;}
      .help-panel {margin:0 2vw 2vw 0;}
      .help-float-btn{right:10px;bottom:10px;}
    }
    /* Stat Cards */
    .stat-card {
      background: var(--card);
      padding: 16px 20px;
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      margin-bottom: 16px;
      text-align: center;
    }
    .stat-card h3 { font-size: 1.15em; margin-bottom: 10px;}
    .stat-card p { font-size: 1.8em; font-weight: 700;}
    .chart-container { height: 260px; margin: 20px 0;}
    /* Course Section */
    .social-list { list-style: none; padding: 0; margin: 0;}
    .social-item { margin-bottom: 12px; display: flex; align-items: center;}
    .social-item input[type="checkbox"] { margin-right: 10px;}
    .social-link { color: var(--primary); text-decoration: none;}
    .quiz-question { margin-bottom: 18px;}
    .quiz-option { display: block; margin-bottom: 6px;}
    #telegram-link { display: none; background: var(--primary-light); padding: 16px; border-radius: var(--radius); margin-top: 24px;}
    #telegram-link a { color: var(--primary); font-weight: 600;}
    /* Billing Plans */
    .billing-cards {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 20px;
    }
    .plan-card {
      background: var(--card); padding: 24px; border-radius: var(--radius);
      box-shadow: var(--shadow); text-align: center; transition: transform var(--transition);
      position: relative;
    }
    .plan-card:hover { transform: scale(1.03);}
    .plan-title { font-size: 1.4em; font-weight: 700; margin-bottom: 8px;}
    .plan-price { font-size: 2em; font-weight: 800; margin-bottom: 6px;}
    .plan-period { font-size: .7em; font-weight: 400; color: var(--muted);}
    .plan-save { font-size: .9em; color: #16a34a; margin-bottom: 18px;}
    .btn-plan { background: var(--primary); color: #fff; border: none; border-radius: 10px; padding: 10px 20px; font-weight: 600; cursor: pointer; transition: background var(--transition);}
    .btn-plan:hover { background: var(--primary-hover);}
    .btn-plan.active { background: #16a34a;}
    .plan-card ul { list-style: none; padding: 0; margin: 20px 0 0 0; text-align: left;}
    .plan-card li { margin-bottom: 8px; font-size: .95em; display: flex; align-items: center; gap: 6px;}
    .plan-card li i { color: #16a34a; font-size: 1.2em;}
    .plan-card li i.ri-information-line { color: var(--primary); font-size: 1em; cursor: pointer;}
    /* Payment Modal */
    .pay-modal-bg {
      display: none; position: fixed; z-index: 10000; left: 0; top: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.4); align-items: center; justify-content: center;
    }
    .pay-modal-bg.active { display: flex;}
    .pay-modal {
      background: var(--card); border-radius: 20px; box-shadow: 0 4px 38px #0003;
      width: 420px; max-width: 95vw; min-height: 300px; padding: 28px;
      animation: fadeInSection .3s; position: relative;
    }
    .pay-modal .close-btn { position: absolute; top: 12px; right: 12px; font-size: 1.8em; cursor: pointer; color: #aaa; background: none; border: none;}
    .pay-modal .plan-title { font-size: 1.5em; font-weight: 800; margin-bottom: 16px;}
    .pay-modal .features-wrap ul { list-style: none; padding: 0; margin-bottom: 20px;}
    .pay-modal .features-wrap li { margin-bottom: 8px; font-size: .95em; display: flex; align-items: center; gap: 6px;}
    .pay-modal .features-wrap li i { color: #16a34a; font-size: 1.2em;}
    .pay-modal .duration { display: flex; gap: 20px; margin-bottom: 18px;}
    .pay-modal .duration label { display: flex; align-items: center; gap: 6px; font-size: 1.05em;}
    .pay-modal .duration input[type="radio"] { transform: scale(1.2);}
    .pay-modal .price-row { font-size: 1.3em; font-weight: 700; margin-bottom: 24px; color: var(--primary);}
    .pay-modal .payment-methods { display: flex; gap: 10px; margin-bottom: 20px;}
    .pay-modal .payment-methods button { flex:1; padding: 10px; border-radius: 10px; border: 1px solid var(--border); background: var(--card); color: var(--text); cursor: pointer; font-weight: 600; transition: background var(--transition);}
    .pay-modal .payment-methods button.active { background: var(--primary-light); border-color: var(--primary); color: var(--primary);}
    .pay-modal .payment-methods i { margin-right: 6px; font-size: 1.2em;}
    .pay-modal .checkbox-row { margin-bottom: 18px; font-size: .95em; color: var(--muted);}
    .pay-modal .checkbox-row input[type="checkbox"] { transform: scale(1.2); margin-right: 8px;}
    .pay-modal .promo-link { background: none; border: none; border: none; color: var(--primary); cursor: pointer; font-weight: 600; margin-bottom: 16px; display: block;}
    .pay-modal .pay-btn { width: 100%; background: var(--primary); color: #fff; border: none; border-radius: 10px; padding: 12px; font-weight: 600; cursor: pointer; transition: background var(--transition);}
    .pay-modal .pay-btn:hover { background: var(--primary-hover);}
    /* Chart Modal */
    .chart-modal-bg {
      display: none; position: fixed; z-index: 10000; left: 0; top: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.4); align-items: center; justify-content: center;
    }
    .chart-modal-bg.active { display: flex;}
    .chart-modal {
      background: var(--card); border-radius: 20px; box-shadow: 0 4px 38px #0003;
      width: 80vw; height: 80vh; max-width: 1200px; padding: 20px;
      position: relative;
    }
    .chart-modal .close-btn { position: absolute; top: 12px; right: 12px; font-size: 1.8em; cursor: pointer; color: #aaa; background: none; border: none;}
    .chart-modal .tradingview-widget-container { height: 100%;}
    /* Bot Creation Modal */
    .bot-modal-bg {
      display: none; position: fixed; z-index: 10000; left: 0; top: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.4); align-items: center; justify-content: center;
    }
    .bot-modal-bg.active { display: flex;}
    .bot-modal {
      background: var(--card); border-radius: 20px; box-shadow: 0 4px 38px #0003;
      width: 600px; max-width: 95vw; padding: 28px;
      animation: fadeInSection .3s; position: relative;
    }
    .bot-modal .close-btn { position: absolute; top: 12px; right: 12px; font-size: 1.8em; cursor: pointer; color: #aaa; background: none; border: none;}
    .bot-modal h2 { font-size: 1.5em; margin-bottom: 16px;}
    .bot-modal label { display: block; margin-bottom: 8px; font-weight: 600;}
    .bot-modal input, .bot-modal select { width: 100%; padding: 10px; border-radius: 8px; border: 1px solid var(--border); margin-bottom: 16px;}
    .bot-modal .strategy-options { margin-bottom: 20px;}
    .bot-modal .strategy-option { margin-bottom: 10px;}
    .bot-modal button[type="submit"] { width: 100%; background: var(--primary); color: #fff; border: none; border-radius: 10px; padding: 12px; font-weight: 600; cursor: pointer; transition: background var(--transition);}
    .bot-modal button[type="submit"]:hover { background: var(--primary-hover);}
    .bot-type-options { margin-bottom: 20px;}
    .bot-type-option { display: block; margin-bottom: 10px;}
    .bot-guide { margin-top: 20px;}
    .bot-guide h3 { font-size: 1.2em; margin-bottom: 10px;}
    .bot-guide ul { list-style-type: disc; padding-left: 20px;}
    /* Bot List */
    .bot-list { list-style: none; padding: 0; margin: 0;}
    .bot-list li { margin-bottom: 12px; display: flex; align-items: center; cursor: pointer;}
    .bot-list li:hover { background: var(--primary-light); border-radius: var(--radius); padding: 8px;}
    /* Table Styles */
    table { width: 100%; border-collapse: collapse; margin-top: 20px;}
    th, td { padding: 12px; border: 1px solid var(--border); text-align: left;}
    th { background: var(--primary-light); }
    /* Form Styles */
    form { max-width: 600px; margin: 0 auto;}
    form label { display: block; margin-bottom: 8px; font-weight: 600;}
    form input, form select { width: 100%; padding: 10px; margin-bottom: 16px; border: 1px solid var(--border); border-radius: 8px;}
    form button { background: var(--primary); color: #fff; border: none; padding: 12px; border-radius: 10px; cursor: pointer; width: 100%;}
    /* Help Modal */
    .help-modal-bg {
      display: none; position: fixed; z-index: 10000; left: 0; top: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.4); align-items: center; justify-content: center;
    }
    .help-modal-bg.active { display: flex;}
    .help-modal {
      background: var(--card); border-radius: 20px; box-shadow: 0 4px 38px #0003;
      width: 600px; max-width: 95vw; min-height: 300px; padding: 28px;
      animation: fadeInSection .3s; position: relative; overflow-y: auto; max-height: 80vh;
    }
    .help-modal .close-btn { position: absolute; top: 12px; right: 12px; font-size: 1.8em; cursor: pointer; color: #aaa; background: none; border: none;}
    .help-modal h1, .help-modal h2, .help-modal h3 { margin-bottom: 16px;}
    .help-modal ul { list-style-type: disc; padding-left: 20px;}
    .help-modal li { margin-bottom: 8px;}
    /* Exchange Modal */
    .exchange-modal-bg {
      display: none; position: fixed; z-index: 10000; left: 0; top: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.4); align-items: center; justify-content: center;
    }
    .exchange-modal-bg.active { display: flex;}
    .exchange-modal {
      background: var(--card); border-radius: 20px; box-shadow: 0 4px 38px #0003;
      width: 500px; max-width: 95vw; padding: 28px;
      animation: fadeInSection .3s; position: relative;
    }
    .exchange-modal .close-btn { position: absolute; top: 12px; right: 12px; font-size: 1.8em; cursor: pointer; color: #aaa; background: none; border: none;}
    .exchange-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px;}
    .exchange-item { padding: 10px; border: 1px solid var(--border); border-radius: 10px; text-align: center; cursor: pointer;}
    .exchange-item:hover { background: var(--primary-light);}
    .exchange-form { display: none; margin-top: 20px;}
    .exchange-form.active { display: block;}
    .exchange-help { margin-top: 20px; font-size: 0.95em; color: var(--muted);}
    .exchange-help a { color: var(--primary);}
    /* Watchlist Styles */
    .watchlist-container { display: flex; gap: 20px;}
    .available-coins { flex: 1;}
    .available-coins ul { list-style: none; padding: 0;}
    .available-coins li { display: flex; align-items: center; padding: 10px; border-bottom: 1px solid var(--border); cursor: pointer;}
    .available-coins li:hover { background: var(--primary-light);}
    .available-coins i { margin-left: auto; color: #ccc;}
    .available-coins i.active { color: #ffcc00;}
    .watchlist-selected { flex: 1;}
    .watchlist-selected ul { list-style: none; padding: 0;}
    .watchlist-selected li { display: flex; align-items: center; padding: 10px; border-bottom: 1px solid var(--border);}
    .watchlist-selected button { background: #dc2626; color: #fff; border: none; padding: 5px 10px; border-radius: 5px; cursor: pointer; margin-left: auto;}
    /* Bot Section Layout */
    .bot-content { display: flex; gap: 20px;}
    .bot-params { flex: 1;}
    .bot-chart { flex: 1;}
    .bot-params form { max-width: none;}
    /* Terminal Layout */
    .terminal-content { display: flex; gap: 20px;}
    .terminal-params { flex: 1;}
    .terminal-chart { flex: 1;}
    .terminal-params form { max-width: none;}
    /* Responsive Improvements */
    @media (max-width: 768px) {
      .bot-content, .terminal-content, .watchlist-container { flex-direction: column; }
      .topbar { padding: 0 16px; }
      .crypto-prices { flex-wrap: wrap; gap: 8px; }
      .billing-cards { grid-template-columns: 1fr; }
      .main { padding: 16px; }
    }
    .crypto-icon { width: 22px; height: 22px; object-fit: contain; border-radius: 50%; }
  </style>
</head>
<body>
  <!-- Sidebar -->
  <nav class="sidebar" id="sidebar">
    <div class="logo"><img src="logo.png" alt="Financial Harmony logo"></div>
    <button class="sidebar-icon active" data-section="dashboard" title="Dashboard"><i class="ri-home-5-line"></i> <span class="label">Dashboard</span></button>
    <button class="sidebar-icon" data-section="trades" title="Trades"><i class="ri-exchange-dollar-line"></i> <span class="label">Trades</span></button>
    <button class="sidebar-icon" data-section="portfolio" title="Portfolio"><i class="ri-briefcase-4-line"></i> <span class="label">Portfolio</span></button>
    <button class="sidebar-icon" data-section="bots-signals" title="My Signals Bots"><i class="ri-robot-2-line"></i> <span class="label">My Signals Bots</span></button>
    <button class="sidebar-icon" data-section="bots-grid" title="My Grid Bots"><i class="ri-grid-line"></i> <span class="label">My Grid Bots</span></button>
    <button class="sidebar-icon" data-section="bots-dca" title="My DCA Bots"><i class="ri-line-chart-line"></i> <span class="label">My DCA Bots</span></button>
    <button class="sidebar-icon" data-section="bots-tradingview" title="My TradingView Bots"><i class="ri-line-chart-line"></i> <span class="label">My TradingView Bots</span></button>
    <button class="sidebar-icon" data-section="terminal" title="Trading Terminal"><i class="ri-bar-chart-grouped-line"></i> <span class="label">Terminal</span></button>
    <button class="sidebar-icon" data-section="signals" title="Signals"><i class="ri-broadcast-line"></i> <span class="label">Signals</span></button>
    <button class="sidebar-icon" data-section="marketplace" title="Marketplace"><i class="ri-store-3-line"></i> <span class="label">Marketplace</span></button>
    <button class="sidebar-icon" data-section="watchlist" title="Watchlist"><i class="ri-eye-line"></i> <span class="label">Watchlist</span></button>
    <button class="sidebar-icon" data-section="course" title="Curso BTC"><i class="ri-book-open-line"></i> <span class="label">Curso BTC</span></button>
    <button class="sidebar-icon" data-section="billing" title="Billing"><i class="ri-money-dollar-circle-line"></i> <span class="label">Billing</span></button>
    <button class="sidebar-icon" data-section="account" title="Account & Security"><i class="ri-user-settings-line"></i> <span class="label">Account</span></button>
    <button class="sidebar-icon" data-section="help" title="Ayuda/Soporte"><i class="ri-customer-service-2-line"></i> <span class="label">Ayuda</span></button>
  </nav>
  <!-- Topbar -->
  <div class="topbar" id="topbar">
    <div class="logo-txt">
      <img src="logo.png" alt="logo" />
      <span>Financial Harmony</span>
    </div>
    <div class="nav-tabs">
      <button class="nav-tab active">Live Trading</button>
      <button class="nav-tab">Demo</button>
    </div>
    <div class="crypto-prices">
      <div class="crypto-price" data-symbol="BTCUSDT"><img class="crypto-icon" src="https://cryptologos.cc/logos/bitcoin-btc-logo.svg?v=026" alt="BTC">BTC/USDT <span class="price">$--</span> <span class="price-change">--% --</span></div>
      <div class="crypto-price" data-symbol="ETHUSDT"><img class="crypto-icon" src="https://cryptologos.cc/logos/ethereum-eth-logo.svg?v=026" alt="ETH">ETH/USDT <span class="price">$--</span> <span class="price-change">--% --</span></div>
      <div class="crypto-price" data-symbol="ADAUSDT"><img class="crypto-icon" src="https://cryptologos.cc/logos/cardano-ada-logo.svg?v=026" alt="ADA">ADA/USDT <span class="price">$--</span> <span class="price-change">--% --</span></div>
      <div class="crypto-price" data-symbol="NOTUSDT"><img class="crypto-icon" src="https://cryptologos.cc/logos/notcoin-not-logo.svg?v=026" alt="NOT">NOT/USDT <span class="price">$--</span> <span class="price-change">--% --</span></div>
      <div class="crypto-price" data-symbol="DOGEUSDT"><img class="crypto-icon" src="https://cryptologos.cc/logos/dogecoin-doge-logo.svg?v=026" alt="DOGE">DOGE/USDT <span class="price">$--</span> <span class="price-change">--% --</span></div>
    </div>
    <button class="create-bot" id="create-bot-btn">+ Create Bot</button>
    <div class="notifications">
      <span class="bell"><i class="ri-notification-3-line"></i></span>
      <span class="notification-count">25</span>
      <div class="notifications-dropdown">
        <h3>Notifications</h3>
        <div class="notification-item">New trade opened: BTC/USDT</div>
        <div class="notification-item">Bot created: Martingale Bot</div>
        <div class="notification-item">Upgrade your plan for more features</div>
      </div>
    </div>
    <!-- Integrated Auth0 elements -->
    <button id="login" class="create-bot" style="display: block; margin-right: 10px;">Login</button>
    <div id="profile" class="user-profile" style="display: none; margin-right: 10px;"></div>
    <button id="logout" class="create-bot" style="display: none; background: #dc2626; margin-right: 10px;">Logout</button>
  </div>
  <!-- Main SPA Sections -->
  <main class="main" id="main">
    <!-- Dashboard -->
    <section id="dashboard" class="section active">
      <h2>Dashboard</h2>
      <p>Open Trades: 2 hot trades (out of 5)</p>
      <div style="text-align: center; margin: 18px 0 26px 0;">
        <span style="font-size: 48px; color: #ccc;">↓</span>
        <p>Active trades overview</p>
        <button class="create-bot">Create Trade</button>
      </div>
      <div style="display: flex; gap: 16px; justify-content: space-between; flex-wrap:wrap;">
        <div class="stat-card"><h3>Open Trades</h3><p>2</p></div>
        <div class="stat-card"><h3>Amount in Open Trades</h3><p>$500</p></div>
        <div class="stat-card"><h3>PnL in Open Trades</h3><p>+5%</p></div>
        <div class="stat-card"><h3>Potential Profit</h3><p>$250</p></div>
      </div>
      <div class="chart-container"><canvas id="dashboard-overview-chart"></canvas></div>
      <h3>Recent Activity</h3>
      <table>
        <thead><tr><th>Action</th><th>Symbol</th><th>Time</th></tr></thead>
        <tbody>
          <tr><td>Trade Opened</td><td>BTC/USDT</td><td>2 hours ago</td></tr>
          <tr><td>Bot Activated</td><td>ETH/USDT</td><td>5 hours ago</td></tr>
        </tbody>
      </table>
    </section>
    <!-- Trades -->
    <section id="trades" class="section">
      <h2>Trades</h2>
      <div class="nav-tabs">
        <button class="nav-tab active">Open</button>
        <button class="nav-tab">Closed</button>
      </div>
      <div style="display: flex; gap:18px;">
        <div style="flex: 1;">
          <h3>Trades Amount Allocation</h3>
          <div class="chart-container"><canvas id="trades-allocation-chart"></canvas></div>
          <p>Total $500</p>
        </div>
        <div style="flex: 1;">
          <h3>Number of Trades</h3>
          <div class="chart-container"><canvas id="trades-number-chart"></canvas></div>
          <p>5 trades in last month</p>
        </div>
      </div>
      <table>
        <thead>
        <tr><th>Trade ID</th><th>Symbol</th><th>Amount</th><th>Status</th><th>PnL</th><th>Actions</th></tr>
        </thead>
        <tbody>
        <tr><td>001</td><td>BTC/USDT</td><td>$100</td><td>Open</td><td>+2%</td><td><button>Close</button></td></tr>
        <tr><td>002</td><td>ETH/USDT</td><td>$400</td><td>Open</td><td>+3%</td><td><button>Close</button></td></tr>
        <tr><td>003</td><td>ADA/USDT</td><td>$200</td><td>Closed</td><td>+1.5%</td><td><button>View</button></td></tr>
        </tbody>
      </table>
      <div class="tradingview-widget-container" style="height: 500px; margin-top: 20px;">
        <div id="trades-chart"></div>
      </div>
    </section>
    <!-- Portfolio -->
    <section id="portfolio" class="section">
      <h2>Portfolio</h2>
      <div class="nav-tabs" style="margin-bottom: 0;">
        <button class="nav-tab active">Assets (13)</button>
        <button class="nav-tab">Positions (6)</button>
      </div>
      <div style="display: flex; gap:18px;">
        <div style="flex: 1;">
          <h3>Assets allocation</h3>
          <div class="chart-container"><canvas id="portfolio-allocation-chart"></canvas></div>
          <p>Total $95,690</p>
        </div>
        <div style="flex: 2;">
          <h3>Price Change</h3>
          <div class="chart-container"><canvas id="portfolio-change-chart"></canvas></div>
        </div>
      </div>
      <table>
        <thead>
        <tr><th>Symbol</th><th>Type</th><th>Value</th><th>PnL</th><th>Status</th><th>Actions</th></tr>
        </thead>
        <tbody>
        <tr><td>BTC/USDT</td><td>Spot</td><td>$50,000</td><td>+2%</td><td>Active</td><td><button>Manage</button></td></tr>
        <tr><td>ETH/USDT</td><td>Futures</td><td>$30,000</td><td>+4%</td><td>Active</td><td><button>Manage</button></td></tr>
        <tr><td>ADA/USDT</td><td>Spot</td><td>$15,690</td><td>-1%</td><td>Active</td><td><button>Manage</button></td></tr>
        </tbody>
      </table>
    </section>
    <!-- My Signals Bots -->
    <section id="bots-signals" class="section">
      <h2>My Signals Bots</h2>
      <div class="bot-content">
        <div class="bot-params">
          <p>Revolutionizing auto trading with advanced strategies. Signals Bots automate trades by following signals from Telegram groups or marketplace experts. Set entry strategies, take-profits, stops, and advanced settings like backtesting.</p>
          <button>Watch Video</button>
          <button>Learn More</button>
          <ul class="bot-list">
            <li data-symbol="BTCUSDT"><i class="ri-robot-2-line"></i> Signals Bot 1 (BTC/USDT)</li>
            <li data-symbol="ETHUSDT"><i class="ri-robot-2-line"></i> Signals Bot 2 (ETH/USDT)</li>
          </ul>
          <h3>Backtesting</h3>
          <p>Test your signals bot strategies on historical data. Set time frames, initial funds, and run simulations.</p>
          <form>
            <label>Strategy</label>
            <select><option>Martingale</option><option>Custom</option></select>
            <label>Time Frame</label>
            <input type="text" placeholder="e.g., 1 year">
            <button type="submit">Run Backtest</button>
          </form>
        </div>
        <div class="bot-chart">
          <div class="tradingview-widget-container" style="height: 500px;">
            <div id="bots-signals-chart"></div>
          </div>
        </div>
      </div>
    </section>
    <!-- My Grid Bots -->
    <section id="bots-grid" class="section">
      <h2>My Grid Bots</h2>
      <div class="bot-content">
        <div class="bot-params">
          <p>Grid bots place buy and sell orders at preset levels to profit from market fluctuations. Set price ranges, number of grids, and amounts.</p>
          <ul class="bot-list">
            <li data-symbol="BTCUSDT"><i class="ri-grid-line"></i> Grid Bot 1 (BTC/USDT, 5 Grids, 3% Range)</li>
          </ul>
          <form>
            <label>Price Range (%)</label>
            <input type="number" value="3">
            <label>Number of Grids</label>
            <input type="number" value="5">
            <button type="submit">Configure Grid</button>
          </form>
        </div>
        <div class="bot-chart">
          <div class="tradingview-widget-container" style="height: 500px;">
            <div id="bots-grid-chart"></div>
          </div>
        </div>
      </div>
    </section>
    <!-- My DCA Bots -->
    <section id="bots-dca" class="section">
      <h2>My DCA Bots</h2>
      <div class="bot-content">
        <div class="bot-params">
          <p>Dollar-cost averaging bots buy at intervals to reduce volatility impact. Configure buy intervals, max orders, and sell targets.</p>
          <ul class="bot-list">
            <li data-symbol="BTCUSDT"><i class="ri-line-chart-line"></i> DCA Bot 1 (BTC/USDT, 5% Drop Interval)</li>
          </ul>
          <form>
            <label>Interval Drop (%)</label>
            <input type="number" value="5">
            <label>Max Orders</label>
            <input type="number" value="5">
            <button type="submit">Configure DCA</button>
          </form>
        </div>
        <div class="bot-chart">
          <div class="tradingview-widget-container" style="height: 500px;">
            <div id="bots-dca-chart"></div>
          </div>
        </div>
      </div>
    </section>
    <!-- My TradingView Bots -->
    <section id="bots-tradingview" class="section">
      <h2>My TradingView Bots</h2>
      <div class="bot-content">
        <div class="bot-params">
          <p>Combine the power of TradingView with automation. Set up alerts from TradingView indicators to execute trades automatically.</p>
          <button>Watch Video</button>
          <button>Learn More</button>
          <ul class="bot-list">
            <li data-symbol="BTCUSDT"><i class="ri-line-chart-line"></i> TradingView Bot 1 (BTC/USDT)</li>
          </ul>
          <form>
            <label>TradingView Alert UUID</label>
            <input type="text">
            <button type="submit">Link Alert</button>
          </form>
        </div>
        <div class="bot-chart">
          <div class="tradingview-widget-container" style="height: 500px;">
            <div id="bots-tradingview-chart"></div>
          </div>
        </div>
      </div>
    </section>
    <!-- Trading Terminal -->
    <section id="terminal" class="section">
      <h2>Trading Terminal</h2>
      <div class="terminal-content">
        <div class="terminal-params">
          <p>Execute manual trades with advanced tools like trailing stops and hedge mode.</p>
          <form>
            <label>Account</label>
            <select><option>My-Bitget-Spot-8D21</option></select>
            <label>Symbol</label>
            <input type="text" value="BTC/USDT">
            <label>New Amount (USDT)</label>
            <input type="text">
            <label>Available Amount</label>
            <p>27.269 USDT (27.26 USD)</p>
            <label>Trade Amount</label>
            <input type="text" value="5.03 USDT (5.03 USD)">
            <label>Direction</label>
            <select><option>Long</option><option>Short</option></select>
            <label>Leverage</label>
            <input type="number" value="1">
            <button type="submit">Create Trade</button>
          </form>
        </div>
        <div class="terminal-chart">
          <div class="tradingview-widget-container" style="height: 500px;">
            <div id="terminal-chart-widget"></div>
          </div>
        </div>
      </div>
    </section>
    <!-- Signals -->
    <section id="signals" class="section">
      <h2>Signals</h2>
      <div class="nav-tabs">
        <button class="nav-tab active">Open</button>
        <button class="nav-tab">Closed</button>
      </div>
      <p>Follow signals from marketplace or Telegram groups.</p>
      <table>
        <thead>
        <tr><th>Symbol</th><th>Exchanges</th><th>Price</th><th>Profit</th><th>Last Updated</th><th>Actions</th></tr>
        </thead>
        <tbody>
        <tr><td>BTC/USDT</td><td>Bitget, Binance</td><td>$112,000</td><td>2.5%</td><td>5 min ago</td><td><button>View</button> <button>Follow</button></td></tr>
        <tr><td>ETH/USDT</td><td>Binance</td><td>$3,500</td><td>1.8%</td><td>10 min ago</td><td><button>View</button> <button>Follow</button></td></tr>
        </tbody>
      </table>
    </section>
    <!-- Marketplace -->
    <section id="marketplace" class="section">
      <h2>Marketplace</h2>
      <p>Browse and subscribe to expert signal providers and bots.</p>
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px;">
        <div class="stat-card"><h3>The MARTINGALE Bot</h3><p>★★★★☆ (4.2)</p><p>Automated martingale strategy for recovery.</p><button>Free Trial</button></div>
        <div class="stat-card"><h3>Crypto Dreams Signals</h3><p>★★★★★ (4.8)</p><p>High-accuracy signals from experts.</p><button>Subscribe</button></div>
        <div class="stat-card"><h3>DCA Master</h3><p>★★★★ (4.0)</p><p>Advanced DCA configurations.</p><button>Free Trial</button></div>
      </div>
    </section>
    <!-- Watchlist -->
    <section id="watchlist" class="section">
      <h2>Watchlist</h2>
      <div class="watchlist-container">
        <div class="available-coins">
          <h3>Available Coins</h3>
          <ul id="available-coins-list">
            <!-- Dynamic list -->
          </ul>
        </div>
        <div class="watchlist-selected">
          <h3>Favorites</h3>
          <ul id="watchlist-list">
            <!-- Dynamic favorites -->
          </ul>
        </div>
      </div>
    </section>
    <!-- Curso BTC Esta -->
    <section id="course" class="section">
      <h2>Curso BTC Esta</h2>
      <p>Para acceder al curso, sigue todos los perfiles en redes sociales a continuación y marca las casillas una vez que lo hayas hecho. Luego, responde correctamente al cuestionario. Una vez completadas todas las tareas, se revelará el enlace de Telegram.</p>
      <ul class="social-list">
        <li class="social-item">
          <input type="checkbox" class="follow-check" data-social="x">
          Sigue en X: <a href="https://x.com/financialharmon" target="_blank" class="social-link">@financialharmon</a>
        </li>
        <li class="social-item">
          <input type="checkbox" class="follow-check" data-social="youtube">
          Sigue en YouTube: <a href="https://www.youtube.com/@FinancialHarmony-z1n" target="_blank" class="social-link">@FinancialHarmony-z1n</a>
        </li>
        <li class="social-item">
          <input type="checkbox" class="follow-check" data-social="instagram">
          Sigue en Instagram: <a href="https://www.instagram.com/jrfinancialharmony" target="_blank" class="social-link">jrfinancialharmony</a>
        </li>
        <li class="social-item">
          <input type="checkbox" class="follow-check" data-social="tiktok">
          Sigue en TikTok: <a href="https://www.tiktok.com/@financial.harmony0" target="_blank" class="social-link">financial.harmony0</a>
        </li>
      </ul>
      <h3>Cuestionario BTC</h3>
      <div class="quiz-question">
        <p>1. ¿Qué significa BTC?</p>
        <label class="quiz-option"><input type="radio" name="q1" value="a"> a) Bitcoin</label>
        <label class="quiz-option"><input type="radio" name="q1" value="b"> b) Bytecoin</label>
        <label class="quiz-option"><input type="radio" name="q1" value="c"> c) Bitcash</label>
      </div>
      <div class="quiz-question">
        <p>2. ¿Quién creó Bitcoin?</p>
        <label class="quiz-option"><input type="radio" name="q2" value="a"> a) Elon Musk</label>
        <label class="quiz-option"><input type="radio" name="q2" value="b"> b) Satoshi Nakamoto</label>
        <label class="quiz-option"><input type="radio" name="q2" value="c"> c) Vitalik Buterin</label>
      </div>
      <div class="quiz-question">
        <p>3. ¿Cuál es el suministro máximo de BTC?</p>
        <label class="quiz-option"><input type="radio" name="q3" value="a"> a) 21 millones</label>
        <label class="quiz-option"><input type="radio" name="q3" value="b"> b) Ilimitado</label>
        <label class="quiz-option"><input type="radio" name="q3" value="c"> c) 100 millones</label>
      </div>
      <div class="quiz-question">
        <p>4. ¿Qué es el halving de Bitcoin?</p>
        <label class="quiz-option"><input type="radio" name="q4" value="a"> a) Reducción a la mitad de la recompensa por minado</label>
        <label class="quiz-option"><input type="radio" name="q4" value="b"> b) Duplicación del suministro</label>
        <label class="quiz-option"><input type="radio" name="q4" value="c"> c) Cambio en el algoritmo</label>
      </div>
      <div class="quiz-question">
        <p>5. ¿Bitcoin es descentralizado?</p>
        <label class="quiz-option"><input type="radio" name="q5" value="a"> a) Sí</label>
        <label class="quiz-option"><input type="radio" name="q5" value="b"> b) No</label>
      </div>
      <button id="verify-quiz">Verificar y Revelar Enlace</button>
      <div id="telegram-link">
        <p>¡Felicidades! Has completado las tareas. Únete al grupo de Telegram para el curso: <a href="https://t.me/+k6JRjS5U9vY3Yjg0" target="_blank">Inicia en Crypto con Armonía</a></p>
      </div>
    </section>
    <!-- Billing -->
    <section id="billing" class="section">
      <h2>Billing</h2>
      <div class="billing-cards">
        <div class="plan-card active" data-plan="free">
          <div class="plan-title">Free</div>
          <div class="plan-price">$0 <span class="plan-period">/ month</span></div>
          <div class="plan-save" style="color:#8391ad;">No Cost</div>
          <button class="btn-plan active">Active</button>
          <ul>
            <li><i class="ri-check-line"></i>3 Active Manual Trades</li>
            <li><i class="ri-check-line"></i>3 Active Signal Trades</li>
            <li><i class="ri-check-line"></i>1 Active Signals Bot</li>
            <li><i class="ri-check-line"></i>1 Active Grid Bot</li>
            <li><i class="ri-check-line"></i>1 Active DCA Bot</li>
            <li><i class="ri-check-line"></i>1 Active TradingView Bot</li>
            <li><i class="ri-check-line"></i>1 Monthly Backtesting Run</li>
            <li><i class="ri-information-line" title="Primary API Slot"></i>1 Primary API Slot</li>
          </ul>
        </div>
        <div class="plan-card" data-plan="starter">
          <div class="plan-title">Starter</div>
          <div class="plan-price">$19.99 <span class="plan-period">/ month</span></div>
          <div class="plan-save">You save $118.9 a year</div>
          <button class="btn-plan">Upgrade</button>
          <ul>
            <li><i class="ri-check-line"></i><b>Unlimited</b> Active Manual Trades</li>
            <li><i class="ri-check-line"></i><b>Unlimited</b> Active Signal Trades</li>
            <li><i class="ri-check-line"></i>1 Active Signals Bot</li>
            <li><i class="ri-check-line"></i>2 Active Grid Bots</li>
            <li><i class="ri-check-line"></i>2 Active DCA Bots</li>
            <li><i class="ri-check-line"></i>2 Active TradingView Bots</li>
            <li><i class="ri-check-line"></i>10 Monthly Backtesting Runs</li>
            <li><i class="ri-information-line" title="Primary API Slot"></i>1 Primary API Slot</li>
          </ul>
        </div>
        <div class="plan-card" data-plan="advanced">
          <div class="plan-title">Advanced</div>
          <div class="plan-price">$32.99 <span class="plan-period">/ month</span></div>
          <div class="plan-save">You save $202.9 a year</div>
          <button class="btn-plan">Upgrade</button>
          <ul>
            <li><i class="ri-check-line"></i><b>Unlimited</b> Active Manual Trades</li>
            <li><i class="ri-check-line"></i><b>Unlimited</b> Active Signal Trades</li>
            <li><i class="ri-check-line"></i>3 Active Signals Bots</li>
            <li><i class="ri-check-line"></i>5 Active Grid Bots</li>
            <li><i class="ri-check-line"></i>5 Active DCA Bots</li>
            <li><i class="ri-check-line"></i>5 Active TradingView Bots</li>
            <li><i class="ri-check-line"></i>50 Monthly Backtesting Runs</li>
            <li><i class="ri-information-line" title="Primary API Slot"></i>2 Primary API Slots</li>
          </ul>
        </div>
        <div class="plan-card" data-plan="premium">
          <div class="plan-title">Premium</div>
          <div class="plan-price">$52.99 <span class="plan-period">/ month</span></div>
          <div class="plan-save">You save $322.9 a year</div>
          <button class="btn-plan">Upgrade</button>
          <ul>
            <li><i class="ri-check-line"></i><b>Unlimited</b> Active Manual Trades</li>
            <li><i class="ri-check-line"></i><b>Unlimited</b> Active Signals Bots</li>
            <li><i class="ri-check-line"></i><b>Unlimited</b> Active DCA Bots</li>
            <li><i class="ri-check-line"></i>250 Monthly Backtesting Runs</li>
            <li><i class="ri-check-line"></i><b>Unlimited</b> Active Signal Trades</li>
            <li><i class="ri-check-line"></i><b>Unlimited</b> Active Grid Bots</li>
            <li><i class="ri-check-line"></i><b>Unlimited</b> Active TradingView Bots</li>
            <li><i class="ri-information-line" title="Primary API Slot"></i>5 Primary API Slots</li>
          </ul>
        </div>
      </div>
      <!-- Payment Modal -->
      <div class="pay-modal-bg" id="pay-modal-bg">
        <div class="pay-modal" id="pay-modal">
          <button class="close-btn" id="close-pay-modal" title="Close">&times;</button>
          <div class="plan-title" id="modal-plan-title"></div>
          <div class="features-wrap" id="modal-plan-features"></div>
          <div class="duration">
            <label><input type="radio" name="duration" value="annually" checked>Annually <span style="background:#e0eaff;color:#2563eb;font-size:.97em;padding:2px 6px;border-radius:6px;margin-left:5px;">SAVE 33%</span></label>
            <label><input type="radio" name="duration" value="monthly">Monthly</label>
          </div>
          <div class="price-row" id="modal-plan-price"></div>
          <div class="payment-methods">
            <button type="button" class="active" data-method="paypal"><i class="ri-paypal-fill"></i> PayPal</button>
            <button type="button" data-method="credit-card"><i class="ri-bank-card-line"></i> Credit Card</button>
            <button type="button" data-method="crypto"><i class="ri-coins-line"></i> Crypto</button>
          </div>
          <div style="font-size:.97em; color:var(--muted);margin-bottom:12px;">
            Your plan will start today and will auto-renew on the same date next year or month.
          </div>
          <div class="checkbox-row">
            <input type="checkbox" id="authorize" /> I authorize Financial Harmony to charge me automatically every period until I cancel my subscription.
          </div>
          <button class="promo-link" onclick="alert('Promo feature not implemented')">+ Add Promo Code</button>
          <button class="pay-btn" id="pay-btn">Pay Now</button>
        </div>
      </div>
    </section>
    <!-- Account & Security -->
    <section id="account" class="section">
      <h2>Account & Security</h2>
      <div style="display:flex;flex-wrap:wrap;gap:36px;">
        <div style="flex:1;min-width:290px;">
          <div class="stat-card" style="text-align:left;">
            <h3>Basic Information</h3>
            <div><b>Full Name:</b> John Doe</div>
            <div><b>User Name:</b> johndoe</div>
            <div><b>Email:</b> john@example.com</div>
            <div><b>Password:</b>  <a href="#" style="color:var(--primary);margin-left:7px;">Change</a></div>
          </div>
          <div class="stat-card" style="text-align:left;">
            <h3>External Accounts</h3>
            <div><b>Telegram:</b> <span style="color:#16a34a;">&#9679; Connected</span> didac007 <a href="#" style="color:var(--primary);margin-left:7px;">Disconnect</a></div>
            <div><b>Discord:</b> <span style="color:#dc2626;">&#9679; Not Connected</span> <a href="#" style="color:var(--primary);margin-left:7px;">Connect</a></div>
            <div><b>API Keys:</b> <button id="add-exchange-btn" style="color:var(--primary);">Add Exchange</button></div>
          </div>
        </div>
        <div style="flex:1;min-width:290px;">
          <div class="stat-card" style="text-align:left;">
            <h3>Security</h3>
            <div><b>Google Authenticator:</b> <span style="color:#dc2626;">&#9679; Inactive</span> <a href="#" style="color:var(--primary);margin-left:7px;">Activate</a></div>
            <div><b>Email Verification:</b> <span style="color:#16a34a;">&#9679; Active</span></div>
          </div>
          <div class="stat-card" style="text-align:left;">
            <h3>Settings</h3>
            <div>Dark Mode <span style="background:var(--primary-light);color:var(--primary);font-size:.9em;padding:2px 7px;border-radius:6px;margin-left:6px;">NEW</span>
              <input type="checkbox" id="darkmode-toggle" style="margin-left:12px;transform:scale(1.2);vertical-align:middle;">
            </div>
            <div>Notifications <input type="checkbox" checked style="margin-left:12px;transform:scale(1.2);vertical-align:middle;"></div>
          </div>
        </div>
      </div>
    </section>
    <!-- Ayuda/Soporte -->
    <section id="help" class="section">
      <h2>Ayuda y Soporte</h2>
      <p>Abre el panel de ayuda desde el botón flotante abajo a la derecha, o desde el menú.</p>
      <h3>Main Categories</h3>
      <ul>
        <li class="help-category" data-category="getting-started">Getting Started</li>
        <li class="help-category" data-category="bots">Bots</li>
        <li class="help-category" data-category="trades">Trades</li>
        <li class="help-category" data-category="portfolio">Portfolio</li>
        <li class="help-category" data-category="signals-marketplace">Signals & Marketplace</li>
        <li class="help-category" data-category="billing-plans">Billing & Plans</li>
        <li class="help-category" data-category="account-security">Account & Security</li>
        <li class="help-category" data-category="advanced-features">Advanced Features</li>
      </ul>
    </section>
  </main>
  <!-- Floating help panel -->
  <div class="help-float-btn" id="help-float-btn" title="Ayuda / Soporte">
    <i class="ri-customer-service-2-line"></i>
  </div>
  <div class="help-panel-bg" id="help-panel-bg">
    <div class="help-panel">
      <div class="help-header">
        <div class="help-agents">
          <img class="help-agent" src="https://randomuser.me/api/portraits/men/32.jpg" alt="agent">
          <img class="help-agent" src="https://randomuser.me/api/portraits/men/33.jpg" alt="agent">
          <img class="help-agent" src="https://randomuser.me/api/portraits/men/34.jpg" alt="agent">
        </div>
        <button class="close-btn" id="help-close-btn">&times;</button>
      </div>
      <div class="help-panel-content" style="flex:1;overflow-y:auto;">
        <h2>Hi there <span style="font-size:1.1em;">👋</span><br>How can we help?</h2>
        <p>Send us a message<br><span style="font-size:.98em;color:#eee;">We typically reply in under 5 minutes</span></p>
        <div class="search-box">
          <input type="search" placeholder="Search for help..." />
        </div>
        <div class="help-links-list">
          <div class="help-link-item">Signals Bot Advanced Settings – Entry Strategy: Configure entries with multiple targets and conditions.</div>
          <div class="help-link-item">Disclaimer on Historical Data and Backtesting Assumptions: Understand limitations of backtesting.</div>
          <div class="help-link-item">How to connect your API: Step-by-step guide to link exchanges like Binance, Bitget.</div>
          <div class="help-link-item">DCA Bot Setup: Buy at dips, set max orders and intervals.</div>
          <div class="help-link-item">Grid Bot Configuration: Define price grids for automated buy/sell.</div>
          <div class="help-link-item">TradingView Integration: Set up alerts for auto execution.</div>
          <div class="help-link-item">Manual Trades in Terminal: Use trailing stops and hedge mode.</div>
          <div class="help-link-item">Portfolio Management: Track PnL, assets, and positions.</div>
          <div class="help-link-item">Marketplace Subscription: Follow expert signals.</div>
          <div class="help-link-item">Billing and Upgrades: Manage plans and payments.</div>
        </div>
      </div>
      <div class="help-bottom-bar">
        <button class="active"><i class="ri-home-4-line"></i><span style="font-size:.93em;">Home</span></button>
        <button><i class="ri-chat-3-line"></i><span style="font-size:.93em;">Messages</span></button>
        <button><i class="ri-question-line"></i><span style="font-size:.93em;">Help</span></button>
        <button><i class="ri-task-line"></i><span style="font-size:.93em;">Tasks</span></button>
      </div>
    </div>
  </div>
  <!-- Chart Modal -->
  <div class="chart-modal-bg" id="chart-modal-bg">
    <div class="chart-modal">
      <button class="close-btn" id="close-chart-modal">&times;</button>
      <div class="tradingview-widget-container">
        <div id="coin-chart-widget"></div>
      </div>
    </div>
  </div>
  <!-- Bot Type Selection Modal -->
  <div class="bot-modal-bg" id="bot-type-modal-bg">
    <div class="bot-modal">
      <button class="close-btn" id="close-bot-type-modal">&times;</button>
      <h2>Create New Bot</h2>
      <div class="bot-guide">
        <div class="bot-type" data-bot="signals">
          <i class="ri-signal-tower-line"></i>
          <h3>Signals Bot</h3>
          <p>Follow signals from your favorite groups or our marketplace's experts, executing trades automatically.</p>
        </div>
        <div class="bot-type" data-bot="dca">
          <i class="ri-line-chart-line"></i>
          <h3>DCA Bot</h3>
          <p>Utilize dollar-cost averaging strategy with Cornix's advanced features.</p>
        </div>
        <div class="bot-type" data-bot="grid">
          <i class="ri-grid-line"></i>
          <h3>Grid Bot</h3>
          <p>Automatically place buy and sell orders at preset levels, profiting from market fluctuations.</p>
        </div>
        <div class="bot-type" data-bot="tradingview">
          <i class="ri-line-chart-line"></i>
          <h3>TradingView Bot</h3>
          <p>Link TradingView alerts to Cornix for automatic execution based on your strategies and indicators.</p>
        </div>
        <div class="bot-type" data-bot="manual">
          <i class="ri-hand-coin-line"></i>
          <h3>Manual Trading</h3>
          <p>Execute trades manually with precision and flexibility, utilizing Cornix's powerful tools.</p>
        </div>
      </div>
    </div>
  </div>
  <!-- Bot Creation Modal -->
  <div class="bot-modal-bg" id="bot-creation-modal-bg">
    <div class="bot-modal">
      <button class="close-btn" id="close-bot-creation-modal">&times;</button>
      <h2 id="bot-creation-title">Create Bot</h2>
      <form id="bot-form">
        <div class="nav-tabs" style="margin-bottom: 16px;">
          <button class="nav-tab active" data-tab="general">General</button>
          <button class="nav-tab" data-tab="entries">Entries</button>
          <button class="nav-tab" data-tab="take-profits">Take-Profits</button>
          <button class="nav-tab" data-tab="stop">Stop</button>
          <button class="nav-tab" data-tab="advanced">Advanced</button>
        </div>
        <div class="tab-content active" id="general"></div>
        <div class="tab-content" id="entries"></div>
        <div class="tab-content" id="take-profits"></div>
        <div class="tab-content" id="stop"></div>
        <div class="tab-content" id="advanced"></div>
        <div class="strategy-selection">
          <h3>Pre-defined Strategies</h3>
          <select id="predefined-strategy">
            <option value="">Select a strategy</option>
            <option value="martingale">Martingale (Double position after loss)</option>
            <option value="dca-basic">Basic DCA (Buy every 5% drop)</option>
            <option value="grid-basic">Basic Grid (3% range, 5 grids)</option>
            <option value="scalping">Scalping (Short-term trades)</option>
            <option value="swing">Swing Trading (Medium-term)</option>
            <option value="trend-following">Trend Following</option>
          </select>
          <button type="button" id="apply-strategy">Apply Strategy</button>
        </div>
        <div class="tradingview-widget-container" style="height: 300px; margin-top: 20px;">
          <div id="bot-chart-widget"></div>
        </div>
        <button type="submit">Create Bot</button>
      </form>
    </div>
  </div>
  <!-- Exchange Creation Modal -->
  <div class="exchange-modal-bg" id="exchange-modal-bg">
    <div class="exchange-modal">
      <button class="close-btn" id="close-exchange-modal">&times;</button>
      <h2>Create Account</h2>
      <h3>Select Exchange</h3>
      <div class="exchange-list">
        <div class="exchange-item" data-exchange="binance">Binance <br> Spot | Futures</div>
        <div class="exchange-item" data-exchange="bybit">Bybit <br> Spot | Futures</div>
        <div class="exchange-item" data-exchange="okx">OKX <br> Spot | Futures</div>
        <div class="exchange-item" data-exchange="bitget">Bitget <br> Spot | Futures</div>
        <div class="exchange-item" data-exchange="kucoin">KuCoin <br> Spot | Futures</div>
        <div class="exchange-item" data-exchange="bingx">BingX <br> Spot | Futures</div>
        <div class="exchange-item" data-exchange="hyperliquid">HyperLiquid <br> Futures</div>
        <div class="exchange-item" data-exchange="coinbase">Coinbase <br> Spot</div>
        <div class="exchange-item" data-exchange="bitmex">BitMEX <br> Futures</div>
        <div class="exchange-item" data-exchange="huobi">Huobi pro <br> Spot</div>
      </div>
      <form class="exchange-form" id="exchange-form">
        <label for="api-key">API Key</label>
        <input type="text" id="api-key" required>
        <label for="api-secret">API Secret</label>
        <input type="password" id="api-secret" required>
        <label for="passphrase">Passphrase (if required)</label>
        <input type="password" id="passphrase">
        <label for="account-type">Account Type</label>
        <select id="account-type">
          <option>Spot</option>
          <option>Futures</option>
        </select>
        <button type="submit">Connect</button>
      </form>
      <div class="exchange-help">
        <p>Not sure how to create an API key? Read our guide:</p>
        <div id="api-help-content">
          <h1>What is an API key?</h1>
          <p>An API key is a unique identifier that allows Financial Harmony to access your Exchange Account (Binance, ByBit, etc.) programmatically and perform actions on your behalf.</p>
          <h2>What is an API key?</h2>
          <p>An API is an acronym for Application Programmatic Interface, which refers to the functions and procedures by which two applications (or two pieces of software) can communicate with each other. In this case, the API allows Financial Harmony to programmatically communicate with cryptocurrency exchanges like Binance, ByBit, BitMEX, etc. Financial Harmony uses the exchange API to perform actions such as:</p>
          <ul>
            <li>Place new orders.</li>
            <li>Check the existing order status.</li>
            <li>Update orders.</li>
            <li>Check portfolio balance.</li>
            <li>And more...</li>
          </ul>
          <h2>How Does It Work?</h2>
          <p>Whenever you log in to the exchange website, you need to provide your email (or username) and password. Similarly, when Financial Harmony accesses the exchange API programmatically, it needs to provide credentials that grant it permissions to perform actions on your behalf.</p>
          <p>To avoid sharing personal details like your email address and password with other services, exchanges allow you to create an API key (similar to an email address) and API secret (similar to a password), which are tied to your account and can be used for programmatic access to your exchange account.</p>
          <p>In some cases, exchanges add additional layers of security on top of the API key and secret, similar to providing a 2-factor authentication code after entering the email and password. These extra details would need to be provided to Financial Harmony alongside the API key and secret for the client to be created successfully in the Financial Harmony system.</p>
          <h2>Key Permissions & Restrictions</h2>
          <p>To keep your account safe, when creating the API key in your exchange account, you can specify API restrictions. These parameters can restrict the API key to perform only specific actions in your account.</p>
          <p>The following is an example of what the API restrictions section looks like in the Binance exchange (image placeholder referenced, but not included in text).</p>
          <p>In order for the bot to trade on your behalf, Financial Harmony will always require reading and trading permissions:</p>
          <ul>
            <li>Reading permissions allow Financial Harmony to read your portfolio and existing order status.</li>
            <li>Trading permissions allow Financial Harmony to create, update, and cancel orders in your exchange account.</li>
          </ul>
          <p>In some cases, additional permissions may be required, like the Futures permission if you wish to trade Futures using Financial Harmony.</p>
          <h3>Important Note</h3>
          <p>In all cases, it's important to pay special attention that the withdrawal permission is not enabled. This will provide an added layer of defense to your account and ensure no one can use the API to withdraw funds from your account.</p>
          <p>For more information about generating specific API keys in the different exchanges Financial Harmony supports, please visit the <a href="https://help.cornix.io/en/collections/3260334-how-to-get-started#how-to-create-api-keys">How to Create API Keys section</a>.</p>
        </div>
      </div>
    </div>
  </div>
  <!-- Help Category Modals (example for one, replicate for others) -->
  <div class="help-modal-bg" id="help-getting-started-bg">
    <div class="help-modal">
      <button class="close-btn" data-close="help-getting-started-bg">&times;</button>
      <h2>Getting Started</h2>
      <p>Content from Cornix help: Tutorials on setting up accounts, connecting exchanges, and basic navigation.</p>
      <!-- Add more content or link -->
    </div>
  </div>
  <!-- Repeat for other categories with their content -->
  <div class="help-modal-bg" id="help-bots-bg">
    <div class="help-modal">
      <button class="close-btn" data-close="help-bots-bg">&times;</button>
      <h2>Bots</h2>
      <p>Detailed guides on Signals, DCA, Grid, TradingView bots - configuration, strategies, backtesting.</p>
    </div>
  </div>
  <div class="help-modal-bg" id="help-trades-bg">
    <div class="help-modal">
      <button class="close-btn" data-close="help-trades-bg">&times;</button>
      <h2>Trades</h2>
      <p>Managing open/closed trades, manual trading, advanced features like trailing stops.</p>
    </div>
  </div>
  <div class="help-modal-bg" id="help-portfolio-bg">
    <div class="help-modal">
      <button class="close-btn" data-close="help-portfolio-bg">&times;</button>
      <h2>Portfolio</h2>
      <p>Tracking assets, positions, PnL calculations.</p>
    </div>
  </div>
  <div class="help-modal-bg" id="help-signals-marketplace-bg">
    <div class="help-modal">
      <button class="close-btn" data-close="help-signals-marketplace-bg">&times;</button>
      <h2>Signals & Marketplace</h2>
      <p>Following signals, subscribing to providers.</p>
    </div>
  </div>
  <div class="help-modal-bg" id="help-billing-plans-bg">
    <div class="help-modal">
      <button class="close-btn" data-close="help-billing-plans-bg">&times;</button>
      <h2>Billing & Plans</h2>
      <p>Subscription details, upgrades.</p>
    </div>
  </div>
  <div class="help-modal-bg" id="help-account-security-bg">
    <div class="help-modal">
      <button class="close-btn" data-close="help-account-security-bg">&times;</button>
      <h2>Account & Security</h2>
      <p>API management, 2FA setup.</p>
    </div>
  </div>
  <div class="help-modal-bg" id="help-advanced-features-bg">
    <div class="help-modal">
      <button class="close-btn" data-close="help-advanced-features-bg">&times;</button>
      <h2>Advanced Features</h2>
      <p>Hedge mode, custom strategies.</p>
    </div>
  </div>
  <script>
    // SPA Navigation
    document.querySelectorAll('.sidebar-icon').forEach(btn => {
      btn.addEventListener('click', function(){
        document.querySelectorAll('.sidebar-icon').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        let sec = btn.dataset.section;
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        if(sec) document.getElementById(sec).classList.add('active');
        // Open help panel if help
        if(sec==="help") showHelpPanel();
        // Load chart if bot section
        if(sec.startsWith('bots-')) {
          const chartContainer = document.getElementById(sec + '-chart');
          if (chartContainer && chartContainer.children.length === 0) {
            loadBotChart(sec + '-chart', 'BTCUSDT');
          }
        }
      });
    });
    // Topbar Nav Tabs
    document.querySelectorAll('.nav-tabs .nav-tab').forEach(tab => {
      tab.addEventListener('click', function(){
        tab.parentElement.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
        tab.classList.add('active');
      });
    });
    // Dark mode toggle
    document.getElementById('darkmode-toggle').addEventListener('change', function(){
      document.body.classList.toggle('dark', this.checked);
    });
    // Help Panel
    function showHelpPanel() {
      document.getElementById('help-panel-bg').classList.add('active');
    }
    document.getElementById('help-float-btn').onclick = showHelpPanel;
    document.getElementById('help-close-btn').onclick = function(){
      document.getElementById('help-panel-bg').classList.remove('active');
    };
    document.getElementById('help-panel-bg').onclick = function(e){
      if(e.target===document.getElementById('help-panel-bg')) document.getElementById('help-panel-bg').classList.remove('active');
    };
    // Fetch Crypto Prices
    function updateCryptoPrices() {
      fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum,cardano,notcoin,dogecoin&vs_currencies=usd&include_24hr_change=true')
      .then(r => r.json())
      .then(data => {
        function setPrice(id, coin) {
          let el = document.querySelector(`.crypto-price[data-symbol="${id}USDT"]`);
          if(!el) return;
          let price = data[coin]?.usd?.toFixed(2) ?? '--';
          let change = data[coin]?.usd_24h_change?.toFixed(2) ?? '--';
          let dir = change > 0 ? '▲' : '▼';
          let cls = change > 0 ? 'up' : 'down';
          el.querySelector('.price').textContent = `$${price}`;
          el.querySelector('.price-change').textContent = `${change}% ${dir}`;
          el.querySelector('.price-change').className = `price-change ${cls}`;
        }
        setPrice('BTC', 'bitcoin');
        setPrice('ETH', 'ethereum');
        setPrice('ADA', 'cardano');
        setPrice('NOT', 'notcoin');
        setPrice('DOGE', 'dogecoin');
      });
    }
    updateCryptoPrices();
    setInterval(updateCryptoPrices, 32000);
    // Charts
    new Chart(document.getElementById('dashboard-overview-chart'), {
      type: 'line',
      data: { labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
        datasets: [{ label: 'Performance', data: [0, 10, 5, 15, 10, 20], borderColor: '#2563eb', fill: false }]},
      options: { responsive: true, plugins:{legend:{display:false}} }
    });
    new Chart(document.getElementById('trades-allocation-chart'), {
      type: 'doughnut',
      data: { labels: ['BTC', 'ETH', 'Others'],
        datasets: [{ data: [40, 30, 30], backgroundColor: ['#2563eb', '#60a5fa', '#ccc'] }]},
      options: { responsive: true, plugins:{legend:{display:false}} }
    });
    new Chart(document.getElementById('trades-number-chart'), {
      type: 'bar',
      data: { labels: ['1d', '3d', '1w', '1m', '3m', '1y'],
        datasets: [{ label: 'Trades', data: [5, 10, 15, 20, 25, 30], backgroundColor: '#2563eb' }] },
      options: { responsive: true, plugins:{legend:{display:false}} }
    });
    new Chart(document.getElementById('portfolio-allocation-chart'), {
      type: 'doughnut',
      data: { labels: ['USDT', 'Other'],
        datasets: [{ data: [90, 10], backgroundColor: ['#2563eb', '#60a5fa'] }]},
      options: { responsive: true, plugins:{legend:{display:false}} }
    });
    new Chart(document.getElementById('portfolio-change-chart'), {
      type: 'line',
      data: { labels: ['21:00','03:00','09:00','12:00','15:00','19:00'],
        datasets: [{ label: 'BTC/USDT', data: [110540, 112000, 113000, 113200, 113000, 110480], borderColor: '#2563eb', fill: false }]},
      options: { responsive: true, plugins:{legend:{display:false}} }
    });
    // TradingView Widgets
    new TradingView.widget({
      "container_id": "trades-chart",
      "width": "100%",
      "height": "500",
      "symbol": "BINANCE:BTCUSDT",
      "interval": "D",
      "timezone": "Etc/UTC",
      "theme": "light",
      "style": "1",
      "locale": "es",
      "toolbar_bg": "#f1f3f6",
      "enable_publishing": false,
      "allow_symbol_change": true,
      "studies": ["MA", "RSI"],
      "show_popup_button": true,
      "popup_width": "1000",
      "popup_height": "650"
    });
    new TradingView.widget({
      "container_id": "terminal-chart-widget",
      "width": "100%",
      "height": "500",
      "symbol": "BINANCE:BTCUSDT",
      "interval": "D",
      "timezone": "Etc/UTC",
      "theme": "light",
      "style": "1",
      "locale": "es",
      "toolbar_bg": "#f1f3f6",
      "enable_publishing": false,
      "allow_symbol_change": true,
      "studies": ["MA", "RSI"],
      "show_popup_button": true,
      "popup_width": "1000",
      "popup_height": "650"
    });
    // Coin Chart Modal
    let currentSymbol = 'BTCUSDT';
    document.querySelectorAll('.crypto-price').forEach(price => {
      price.addEventListener('click', function(){
        currentSymbol = price.dataset.symbol;
        document.getElementById('chart-modal-bg').classList.add('active');
        loadCoinChart(currentSymbol);
      });
    });
    function loadCoinChart(symbol) {
      new TradingView.widget({
        "container_id": "coin-chart-widget",
        "width": "100%",
        "height": "100%",
        "symbol": `BINANCE:${symbol}`,
        "interval": "D",
        "timezone": "Etc/UTC",
        "theme": "light",
        "style": "1",
        "locale": "es",
        "toolbar_bg": "#f1f3f6",
        "enable_publishing": false,
        "allow_symbol_change": true,
        "studies": ["MA", "RSI"],
        "show_popup_button": true,
        "popup_width": "1000",
        "popup_height": "650"
      });
    }
    document.getElementById('close-chart-modal').onclick = () => {
      document.getElementById('chart-modal-bg').classList.remove('active');
    };
    document.getElementById('chart-modal-bg').onclick = (e) => {
      if(e.target===document.getElementById('chart-modal-bg')) document.getElementById('chart-modal-bg').classList.remove('active');
    };
    // Bot Type Selection Modal
    document.getElementById('create-bot-btn').onclick = () => {
      document.getElementById('bot-type-modal-bg').classList.add('active');
    };
    document.getElementById('close-bot-type-modal').onclick = () => {
      document.getElementById('bot-type-modal-bg').classList.remove('active');
    };
    document.getElementById('bot-type-modal-bg').onclick = (e) => {
      if(e.target===document.getElementById('bot-type-modal-bg')) document.getElementById('bot-type-modal-bg').classList.remove('active');
    };
    // Bot Type Click to Open Creation
    document.querySelectorAll('.bot-type').forEach(type => {
      type.addEventListener('click', () => {
        const botType = type.dataset.bot;
        document.getElementById('bot-type-modal-bg').classList.remove('active');
        document.getElementById('bot-creation-modal-bg').classList.add('active');
        document.getElementById('bot-creation-title').textContent = `Create ${botType.charAt(0).toUpperCase() + botType.slice(1)} Bot`;
        // Customize form for bot type
        customizeBotForm(botType);
      });
    });
    // List of symbols
    const symbols = [
      'BTC/USDT', 'ETH/USDT', 'BNB/USDT', 'SOL/USDT', 'XRP/USDT', 'TON/USDT', 'DOGE/USDT', 'ADA/USDT', 'TRX/USDT', 'AVAX/USDT',
      'SHIB/USDT', 'DOT/USDT', 'LINK/USDT', 'BCH/USDT', 'NEAR/USDT', 'LTC/USDT', 'MATIC/USDT', 'PEPE/USDT', 'UNI/USDT', 'ICP/USDT',
      'FET/USDT', 'APT/USDT', 'HBAR/USDT', 'RNDR/USDT', 'XLM/USDT', 'ATOM/USDT', 'STX/USDT', 'ETC/USDT', 'IMX/USDT', 'FIL/USDT',
      'CRO/USDT', 'MKR/USDT', 'ARB/USDT', 'SUI/USDT', 'OP/USDT', 'INJ/USDT', 'LDO/USDT', 'FLOKI/USDT', 'THETA/USDT', 'FTM/USDT',
      'ALGO/USDT', 'AR/USDT', 'FLOW/USDT', 'JASMY/USDT', 'GALA/USDT', 'QNT/USDT', 'AXS/USDT', 'NOT/USDT', 'BEAM/USDT', 'EGLD/USDT'
    ];
    // Customize Bot Form for Bot Type
    function customizeBotForm(botType) {
      const general = document.getElementById('general');
      const entries = document.getElementById('entries');
      const takeProfits = document.getElementById('take-profits');
      const stop = document.getElementById('stop');
      const advanced = document.getElementById('advanced');
      // Common general fields
      const symbolOptions = symbols.map(s => `<option>${s}</option>`).join('');
      let generalHTML = `
        <label for="bot-name">Bot Name</label>
        <input type="text" id="bot-name" value="${botType.toUpperCase()} Bot">
        <label for="account">Account</label>
        <select id="account">
          <option>My-Bitget-Spot-8D21</option>
        </select>
        <label for="symbol">Symbol</label>
        <select id="symbol">${symbolOptions}</select>
        <label for="amount-per-trade">Amount Per Trade</label>
        <input type="number" id="amount-per-trade" value="12.3">
        <label for="leverage">Leverage (if applicable)</label>
        <input type="number" id="leverage" value="1">
      `;
      entries.innerHTML = `
        <label for="entry-strategy">Entry Strategy</label>
        <select id="entry-strategy">
          <option>Expert Martingale (Double position after loss, stop-loss 10%)</option>
          <option>Expert DCA (Buy every 5% drop, max 5 orders)</option>
          <option>Expert Grid (Buy low/sell high in 3% range)</option>
          <option>Custom</option>
        </select>
        <label for="entry-amount">Entry Amount (% of total)</label>
        <input type="number" id="entry-amount" value="100">
        <label for="entry-conditions">Entry Conditions (e.g., RSI > 70)</label>
        <input type="text" id="entry-conditions">
      `;
      takeProfits.innerHTML = `
        <label for="take-profit-levels">Take Profit Levels</label>
        <input type="text" id="take-profit-levels" placeholder="e.g. 1.5%, 3%, 5%">
        <label for="tp-type">TP Type</label>
        <select id="tp-type">
          <option>Fixed</option>
          <option>Trailing</option>
        </select>
        <label for="tp-trailing-percentage">Trailing Percentage (if trailing)</label>
        <input type="number" id="tp-trailing-percentage" value="1">
      `;
      stop.innerHTML = `
        <label for="stop-loss">Stop Loss (%)</label>
        <input type="number" id="stop-loss" value="10">
        <label for="trailing-stop">Trailing Stop (%)</label>
        <input type="number" id="trailing-stop" value="2">
        <label for="sl-type">SL Type</label>
        <select id="sl-type">
          <option>Fixed</option>
          <option>Trailing</option>
        </select>
      `;
      advanced.innerHTML = `
        <label for="uuid-open">UUID for Trade Opening</label>
        <input type="text" id="uuid-open">
        <label for="uuid-close">UUID for Trade Closing</label>
        <input type="text" id="uuid-close">
        <label for="max-orders">Max Orders</label>
        <input type="number" id="max-orders" value="5">
        <label for="interval-drop">Interval Drop (%)</label>
        <input type="number" id="interval-drop" value="5">
        <label for="backtest">Enable Backtesting</label>
        <input type="checkbox" id="backtest">
        <label for="risk-management">Risk Management (% per trade)</label>
        <input type="number" id="risk-management" value="1">
        <label for="timeframe">Timeframe</label>
        <select id="timeframe">
          <option>1h</option>
          <option>4h</option>
          <option>1d</option>
        </select>
      `;
      if (botType === 'signals' || botType === 'tradingview' || botType === 'manual') {
        generalHTML += `
          <label>Direction</label>
          <div>
            <label><input type="radio" name="direction" value="long" checked> Long</label>
            <label><input type="radio" name="direction" value="short"> Short</label>
          </div>
          <label for="margin-type">Margin Type</label>
          <select id="margin-type">
            <option>Isolated</option>
            <option>Cross</option>
          </select>
          <label for="multiplier">Multiplier</label>
          <input type="number" id="multiplier" value="1">
        `;
      } else if (botType === 'dca') {
        generalHTML += `
          <label for="amount-per-trade">Amount Per Trade</label>
          <input type="number" id="amount-per-trade" value="6.31">
        `;
      } else if (botType === 'grid') {
        generalHTML += `
          <label for="price-range">Price Range (%)</label>
          <input type="text" id="price-range" value="30">
          <label for="grids">Grids</label>
          <input type="number" id="grids" value="5">
          <label for="amount-per-trade">Amount Per Trade</label>
          <input type="number" id="amount-per-trade" value="11.28">
        `;
      }
      general.innerHTML = generalHTML;
    }
    // Pre-defined Strategy Application
    document.getElementById('apply-strategy').addEventListener('click', function() {
      const strategy = document.getElementById('predefined-strategy').value;
      if (strategy === 'martingale') {
        document.getElementById('entry-strategy').value = 'Expert Martingale (Double position after loss, stop-loss 10%)';
        document.getElementById('stop-loss').value = 10;
        document.getElementById('max-orders').value = 5;
      } else if (strategy === 'dca-basic') {
        document.getElementById('entry-strategy').value = 'Expert DCA (Buy every 5% drop, max 5 orders)';
        document.getElementById('interval-drop').value = 5;
        document.getElementById('max-orders').value = 5;
      } else if (strategy === 'grid-basic') {
        document.getElementById('entry-strategy').value = 'Expert Grid (Buy low/sell high in 3% range)';
        document.getElementById('price-range').value = 3;
        document.getElementById('grids').value = 5;
      } else if (strategy === 'scalping') {
        document.getElementById('timeframe').value = '1h';
        document.getElementById('risk-management').value = 0.5;
        document.getElementById('tp-trailing-percentage').value = 0.5;
      } else if (strategy === 'swing') {
        document.getElementById('timeframe').value = '4h';
        document.getElementById('risk-management').value = 2;
        document.getElementById('tp-trailing-percentage').value = 2;
      } else if (strategy === 'trend-following') {
        document.getElementById('timeframe').value = '1d';
        document.getElementById('risk-management').value = 1;
        document.getElementById('entry-conditions').value = 'MA crossover';
      }
    });
    // Bot Form Submit
    document.getElementById('bot-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const botName = document.getElementById('bot-name').value;
      const symbol = document.getElementById('symbol').value;
      const title = document.getElementById('bot-creation-title').textContent.toLowerCase();
      const typeName = title.split(' ')[1]; // e.g., 'signals'
      const sectionMap = {
        signals: 'bots-signals',
        dca: 'bots-dca',
        grid: 'bots-grid',
        tradingview: 'bots-tradingview',
        manual: 'trades' // or handle differently
      };
      const iconMap = {
        signals: 'ri-robot-2-line',
        dca: 'ri-line-chart-line',
        grid: 'ri-grid-line',
        tradingview: 'ri-line-chart-line',
        manual: 'ri-hand-coin-line'
      };
      const sectionId = sectionMap[typeName];
      if (!sectionId) {
        alert('Bot type not supported for listing.');
        return;
      }
      const ul = document.querySelector(`#${sectionId} .bot-list`);
      if (ul) {
        const iconClass = iconMap[typeName];
        const symbolWithoutSlash = symbol.replace('/', '');
        const newLi = document.createElement('li');
        newLi.dataset.symbol = symbolWithoutSlash;
        newLi.innerHTML = `<i class="${iconClass}"></i> ${botName} (${symbol})`;
        ul.appendChild(newLi);
      } else {
        alert('Bot created, but no list to add to.');
      }
      document.getElementById('bot-creation-modal-bg').classList.remove('active');
      document.querySelector(`.sidebar-icon[data-section="${sectionId}"]`).click();
    });
    // Bot List Click to Load Chart
    document.addEventListener('click', function(e) {
      const li = e.target.closest('.bot-list li');
      if (li) {
        const symbol = li.dataset.symbol || 'BTCUSDT';
        const sec = li.closest('.section').id;
        loadBotChart(sec + '-chart', symbol);
      }
    });
    // Load Bot Chart Function
    function loadBotChart(containerId, symbol) {
      const container = document.getElementById(containerId);
      if (container) {
        container.innerHTML = ''; // Clear previous widget
        new TradingView.widget({
          "container_id": containerId,
          "width": "100%",
          "height": "500",
          "symbol": `BINANCE:${symbol}`,
          "interval": "D",
          "timezone": "Etc/UTC",
          "theme": "light",
          "style": "1",
          "locale": "es",
          "toolbar_bg": "#f1f3f6",
          "enable_publishing": false,
          "allow_symbol_change": true,
          "studies": ["MA", "RSI"],
          "show_popup_button": true,
          "popup_width": "1000",
          "popup_height": "650"
        });
      }
    }
    // Billing Modal Logic
    const plansData = {
      starter: {
        title: 'Starter plan',
        features: [
          '<b>Unlimited</b> Active Manual Trades',
          '1 Active Signals Bot',
          '2 Active DCA Bots',
          '10 Monthly Backtesting Runs',
          '<b>Unlimited</b> Active Signal Trades',
          '2 Active Grid Bots',
          '2 Active TradingView Bots',
          '1 Primary API Slot'
        ],
        price: { yearly: 239.9, monthly: 19.99, save: 118.9, old: 29.9 },
      },
      advanced: {
        title: 'Advanced plan',
        features: [
          '<b>Unlimited</b> Active Manual Trades',
          '3 Active Signals Bots',
          '5 Active DCA Bots',
          '50 Monthly Backtesting Runs',
          '<b>Unlimited</b> Active Signal Trades',
          '5 Active Grid Bots',
          '5 Active TradingView Bots',
          '2 Primary API Slots'
        ],
        price: { yearly: 329.9, monthly: 32.99, save: 202.9, old: 49.9 },
      },
      premium: {
        title: 'Premium plan',
        features: [
          '<b>Unlimited</b> Active Manual Trades',
          '<b>Unlimited</b> Active Signals Bots',
          '<b>Unlimited</b> Active DCA Bots',
          '250 Monthly Backtesting Runs',
          '<b>Unlimited</b> Active Signal Trades',
          '<b>Unlimited</b> Active Grid Bots',
          '<b>Unlimited</b> Active TradingView Bots',
          '5 Primary API Slots'
        ],
        price: { yearly: 529.9, monthly: 52.99, save: 322.9, old: 79.9 },
      }
    };
    // Open modal
    document.querySelectorAll('.plan-card:not(.active) .btn-plan').forEach(btn => {
      btn.addEventListener('click', function(e){
        const planType = btn.closest('.plan-card').dataset.plan;
        openPayModal(planType);
      });
    });
    function openPayModal(planType) {
      const data = plansData[planType];
      document.getElementById('modal-plan-title').innerText = data.title;
      // Features
      const featuresHtml = `
        <ul>
          ${data.features.map(f=>`<li><i class="ri-check-line"></i> ${f}</li>`).join('')}
        </ul>
      `;
      document.getElementById('modal-plan-features').innerHTML = featuresHtml;
      // Prices
      const priceDiv = document.getElementById('modal-plan-price');
      function setPrice(duration) {
        if(duration==='annually') {
          priceDiv.innerHTML = `<span style="text-decoration:line-through;color:#aaa;">$${(data.price.old*12).toFixed(1)}</span>
            <b style="font-size:1.5em;color:var(--primary);">$${data.price.monthly.toFixed(2)}</b> <span>/ month</span>
            <br><span style="color:var(--primary);font-size:.97em;">Save $${data.price.save} compared to the monthly plan. ($${data.price.yearly.toFixed(2)}/year)</span>`;
        } else {
          priceDiv.innerHTML = `<b style="font-size:1.5em;color:var(--primary);">$${data.price.monthly.toFixed(2)}</b> <span>/ month</span>`;
        }
      }
      setPrice('annually');
      // Duration
      document.querySelectorAll('input[name="duration"]').forEach(radio => {
        radio.checked = radio.value === 'annually';
        radio.onchange = () => setPrice(radio.value);
      });
      // Payment methods
      document.querySelectorAll('.pay-modal .payment-methods button').forEach(btn => {
        btn.classList.remove('active');
        if(btn.dataset.method==='paypal') btn.classList.add('active');
        btn.onclick = () => {
          document.querySelectorAll('.pay-modal .payment-methods button').forEach(b=>b.classList.remove('active'));
          btn.classList.add('active');
        };
      });
      // Checkbox
      document.getElementById('authorize').checked = false;
      // Show modal
      document.getElementById('pay-modal-bg').classList.add('active');
    }
    document.getElementById('close-pay-modal').onclick = () => {
      document.getElementById('pay-modal-bg').classList.remove('active');
    };
    // Pay Now
    document.getElementById('pay-btn').onclick = () => {
      if(!document.getElementById('authorize').checked) {
        alert('You must authorize the auto-renewal to continue.');
        return;
      }
      alert('Payment flow not implemented in demo.');
      document.getElementById('pay-modal-bg').classList.remove('active');
    };
    document.getElementById('pay-modal-bg').onclick = (e) => {
      if(e.target===document.getElementById('pay-modal-bg')) document.getElementById('pay-modal-bg').classList.remove('active');
    };
    // Course Verification
    const followChecks = document.querySelectorAll('.follow-check');
    const verifyButton = document.getElementById('verify-quiz');
    const telegramLink = document.getElementById('telegram-link');
    verifyButton.addEventListener('click', () => {
      const allChecked = Array.from(followChecks).every(c => c.checked);
      const q1 = document.querySelector('input[name="q1"]:checked')?.value === 'a';
      const q2 = document.querySelector('input[name="q2"]:checked')?.value === 'b';
      const q3 = document.querySelector('input[name="q3"]:checked')?.value === 'a';
      const q4 = document.querySelector('input[name="q4"]:checked')?.value === 'a';
      const q5 = document.querySelector('input[name="q5"]:checked')?.value === 'a';
      if (allChecked && q1 && q2 && q3 && q4 && q5) {
        telegramLink.style.display = 'block';
      } else {
        alert('Por favor, completa todas las tareas sociales y responde correctamente al cuestionario.');
      }
    });
    // Notifications Dropdown
    document.querySelector('.notifications').addEventListener('click', () => {
      document.querySelector('.notifications-dropdown').classList.toggle('active');
    });
    // User Dropdown
    document.getElementById('profile').addEventListener('click', () => {
      document.querySelector('.user-dropdown').classList.toggle('active');
    });
    // Integrated Auth0 script with adjustments for visibility
    auth0.createAuth0Client({
      domain: "dev-uig5oc4olpwf4aw6.eu.auth0.com",
      clientId: "6NLcS9SdNQWYPOFNlRYBQawxLQ1YiKxq",
      authorizationParams: {
        redirect_uri: window.location.origin
      }
    }).then(async (auth0Client) => {
      // Assumes a button with id "login" in the DOM
      const loginButton = document.getElementById("login");
      loginButton.addEventListener("click", (e) => {
        e.preventDefault();
        auth0Client.loginWithRedirect();
      });
      if (location.search.includes("state=") &&
          (location.search.includes("code=") ||
           location.search.includes("error="))) {
        await auth0Client.handleRedirectCallback();
        window.history.replaceState({}, document.title, "/");
      }
      // Assumes a button with id "logout" in the DOM
      const logoutButton = document.getElementById("logout");
      logoutButton.addEventListener("click", (e) => {
        e.preventDefault();
        auth0Client.logout();
      });
      const isAuthenticated = await auth0Client.isAuthenticated();
      const userProfile = await auth0Client.getUser();
      // Assumes an element with id "profile" in the DOM
      const profileElement = document.getElementById("profile");
      // Adjust visibility of buttons
      loginButton.style.display = isAuthenticated ? "none" : "block";
      logoutButton.style.display = isAuthenticated ? "block" : "none";
      if (isAuthenticated) {
        profileElement.style.display = "block";
        profileElement.innerHTML = `
          <p>${userProfile.name}</p>
          <img src="${userProfile.picture}" />
          <div class="user-dropdown">
            <a href="#">Profile Settings</a>
            <a href="#">Security</a>
            <a href="#">Logout</a>
          </div>
        `;
      } else {
        profileElement.style.display = "none";
      }
    });
    // Exchange Modal Logic
    document.getElementById('add-exchange-btn').addEventListener('click', () => {
      document.getElementById('exchange-modal-bg').classList.add('active');
      document.querySelector('.exchange-form').classList.remove('active');
    });
    document.getElementById('close-exchange-modal').addEventListener('click', () => {
      document.getElementById('exchange-modal-bg').classList.remove('active');
    });
    document.getElementById('exchange-modal-bg').addEventListener('click', (e) => {
      if (e.target === document.getElementById('exchange-modal-bg')) {
        document.getElementById('exchange-modal-bg').classList.remove('active');
      }
    });
    document.querySelectorAll('.exchange-item').forEach(item => {
      item.addEventListener('click', () => {
        document.querySelectorAll('.exchange-item').forEach(i => i.classList.remove('active'));
        item.classList.add('active');
        document.querySelector('.exchange-form').classList.add('active');
      });
    });
    document.getElementById('exchange-form').addEventListener('submit', (e) => {
      e.preventDefault();
      alert('Exchange connected successfully!');
      document.getElementById('exchange-modal-bg').classList.remove('active');
    });
    // Help Category Modals
    document.querySelectorAll('.help-category').forEach(category => {
      category.addEventListener('click', () => {
        const catId = category.dataset.category;
        document.getElementById(`help-${catId}-bg`).classList.add('active');
      });
    });
    document.querySelectorAll('.help-modal .close-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.getElementById(btn.dataset.close).classList.remove('active');
      });
    });
    document.querySelectorAll('.help-modal-bg').forEach(bg => {
      bg.addEventListener('click', (e) => {
        if (e.target === bg) {
          bg.classList.remove('active');
        }
      });
    });
    // Watchlist Logic
    const watchlist = [];
    const availableList = document.getElementById('available-coins-list');
    symbols.forEach(symbol => {
      const li = document.createElement('li');
      li.innerHTML = `
        <span>${symbol}</span>
        <i class="ri-star-line"></i>
      `;
      li.querySelector('i').addEventListener('click', () => {
        if (watchlist.includes(symbol)) {
          watchlist.splice(watchlist.indexOf(symbol), 1);
          li.querySelector('i').classList.remove('active');
        } else {
          watchlist.push(symbol);
          li.querySelector('i').classList.add('active');
        }
        updateWatchlist();
      });
      availableList.appendChild(li);
    });
    function updateWatchlist() {
      const list = document.getElementById('watchlist-list');
      list.innerHTML = '';
      watchlist.forEach(symbol => {
        const li = document.createElement('li');
        li.innerHTML = `
          <span>${symbol}</span>
          <button class="remove-watchlist">Remove</button>
        `;
        li.querySelector('.remove-watchlist').addEventListener('click', () => {
          watchlist.splice(watchlist.indexOf(symbol), 1);
          updateWatchlist();
          document.querySelectorAll('.available-coins li').forEach(availLi => {
            if (availLi.querySelector('span').textContent === symbol) {
              availLi.querySelector('i').classList.remove('active');
            }
          });
        });
        list.appendChild(li);
      });
    }
  </script>
</body>
</html>
